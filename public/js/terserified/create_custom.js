let isCustomGameCreationMode=!1;function setupCustomGameButton(){document.getElementById("createCustomGameButton").addEventListener("click",(function(){isCustomGameCreationMode=!isCustomGameCreationMode,isCustomGame?redirectToBaseURL():isCustomGameCreationMode?prepareCustomGameUI():redirectToBaseURL()}))}function removeQueryString(e){return e.split("?")[0]}function redirectToBaseURL(){var e=removeQueryString(window.location.href);window.location.href=e}function prepareCustomGameUI(){document.getElementById("victoryContainer").style.display="none",document.getElementById("howToPlayContainer").style.display="none",document.getElementById("gameMessage").textContent="Select a movie for your friend to guess!",document.getElementById("guessButton").textContent="CREATE LINK",document.getElementById("guessButton").onclick=createCustomGameLink,document.getElementById("guessInput").placeholder="Enter movie title for custom game",document.getElementById("guessInput").disabled=!1,document.getElementById("guessButton").disabled=!1}function createCustomGameLink(){const e=document.getElementById("guessInput").value.trim();if(!e)return;const t=movies.find((t=>t["Movie Title"].toLowerCase()===e.toLowerCase()));if(!t)return void(document.getElementById("gameMessage").textContent="Movie not found, try again.");displayCustomGameLink(generateCustomGameLink(encodeMovieTitle(t["Movie Title"])))}function encodeMovieTitle(e){return btoa(e)}function generateCustomGameLink(e){return`${window.location.href.split("?")[0]}?customGame=${e}`}function displayCustomGameLink(e){let t=document.getElementById("customGameContainer");t||(t=document.createElement("div"),t.id="customGameContainer",document.body.appendChild(t)),t.innerHTML=`Your custom game link: <a href="${e}" target="_blank">${e}</a>`}function clearData(){clearLocalStorageExceptLastResetTime();const e=["customGame_guesses"];document.cookie.split(";").forEach((t=>{let[o,n]=t.split("=");o=o.trim(),e.includes(o)&&(document.cookie=`${o}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`,console.log("Deleted guesses cookies for custom game"))}))}function checkForCustomGame(){console.log("Checking for custom game...");const e=new URLSearchParams(window.location.search).get("customGame");if(e){console.log("Custom game parameter found:",e);const t=decodeMovieTitle(e);if(t){const e=movies.find((e=>e["Movie Title"].toLowerCase()===t.toLowerCase()));e?(selectedMovie=e,isCustomGame=!0,clearData(),displayGuessHistory(),document.getElementById("guessInput").disabled=!1,document.getElementById("guessButton").disabled=!1,updateGameMessage("Custom Game Loaded. Good Luck!"),updateCreateCustomButton("Back"),updateGuessCountDisplay()):console.log("Movie not found for custom game:",t)}else console.log("Invalid or corrupted movie title in URL.")}else console.log("No custom game parameter found.")}function updateCreateCustomButton(e){const t=document.getElementById("createCustomGameButton");t?t.textContent=e:console.error("createCustomGameButton element not found!")}function decodeMovieTitle(e){try{return atob(e)}catch(e){return console.error("Error decoding movie title:",e),null}}function setupGameWithCustomMovie(e){const t=movies.find((t=>t["Movie Title"].toLowerCase()===e.toLowerCase()));t?(selectedMovie=t,document.getElementById("devSelectedMovie").textContent=`Custom Game for: ${t["Movie Title"]}`):console.log("Movie not found for custom game.")}document.addEventListener("DOMContentLoaded",(function(){setupCustomGameButton()}));